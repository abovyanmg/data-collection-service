================================================================================
ÐŸÐžÐ¨ÐÐ“ÐžÐ’ÐÐ¯ ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ ACS Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ« ÐÐ Ð¡Ð•Ð Ð’Ð•Ð Ð•
================================================================================

ÐÐ ÐžÐ¡ÐÐžÐ’Ð• ÐÐÐÐ›Ð˜Ð—Ð Ð ÐÐ‘ÐžÐ¢ÐÐ®Ð©Ð•Ð™ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ« MORINAD

================================================================================
Ð¨ÐÐ“ 1: ÐŸÐžÐ”Ð“ÐžÐ¢ÐžÐ’ÐšÐ Ð¡Ð•Ð Ð’Ð•Ð Ð
================================================================================

# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
apt update && apt upgrade -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹
apt install -y curl wget git unzip

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ñ‡Ð°ÑÐ¾Ð²Ð¾Ð¹ Ð¿Ð¾ÑÑ (ÐœÐ¾ÑÐºÐ²Ð°)
timedatectl set-timezone Europe/Moscow

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²Ñ€ÐµÐ¼Ñ
date

================================================================================
Ð¨ÐÐ“ 2: Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ DOCKER
================================================================================

# Ð£Ð´Ð°Ð»Ð¸Ñ‚Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸ Docker
apt remove -y docker docker-engine docker.io containerd runc

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
apt install -y ca-certificates curl gnupg lsb-release

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ GPG ÐºÐ»ÑŽÑ‡ Docker
mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Docker
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹
apt update

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Docker
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Docker
systemctl start docker
systemctl enable docker

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
docker --version
docker run hello-world

================================================================================
Ð¨ÐÐ“ 3: Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ DOCKER COMPOSE
================================================================================

# Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

# Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¼
chmod +x /usr/local/bin/docker-compose

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
docker-compose --version

================================================================================
Ð¨ÐÐ“ 4: ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ Ð¤ÐÐ™Ð Ð’ÐžÐ›Ð
================================================================================

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ UFW
apt install -y ufw

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°
ufw allow ssh
ufw allow 8123/tcp  # ClickHouse HTTP
ufw allow 9000/tcp  # ClickHouse TCP
ufw --force enable

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ
ufw status

================================================================================
Ð¨ÐÐ“ 5: ÐŸÐžÐ”Ð“ÐžÐ¢ÐžÐ’ÐšÐ Ð¤ÐÐ™Ð›ÐžÐ’
================================================================================

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‡ÑƒÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
mkdir -p /root/data-collection-service/client
cd /root/data-collection-service/client

# Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ docker-compose.yml
wget -O docker-compose.yml https://raw.githubusercontent.com/abovyanmg/data-collection-service/main/client/docker-compose.yml

# Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹
wget -O config.xml https://raw.githubusercontent.com/abovyanmg/data-collection-service/main/admin/examples/config.xml
wget -O users.xml https://raw.githubusercontent.com/abovyanmg/data-collection-service/main/admin/examples/users.xml
wget -O settings.xlsx https://raw.githubusercontent.com/abovyanmg/data-collection-service/main/admin/examples/settings.xlsx

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°
chmod 644 config.xml users.xml settings.xlsx

================================================================================
Ð¨ÐÐ“ 6: Ð¡ÐžÐ—Ð”ÐÐÐ˜Ð• DOCKER Ð Ð•Ð¡Ð£Ð Ð¡ÐžÐ’
================================================================================

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Docker volume Ð´Ð»Ñ ClickHouse
docker volume create clickhouse_volume

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Docker network
docker network create --driver bridge chnet

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ
docker volume ls | grep clickhouse
docker network ls | grep chnet

================================================================================
Ð¨ÐÐ“ 7: ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ ÐŸÐ•Ð Ð•ÐœÐ•ÐÐÐ«Ð¥ ÐžÐšÐ Ð£Ð–Ð•ÐÐ˜Ð¯
================================================================================

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cat > .env << 'EOF'
# ClickHouse Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
CLICKHOUSE_HOST=my_clickhouse
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=YOUR_PASSWORD_HERE
CLICKHOUSE_DATABASE=default

# Telegram Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_HERE
TELEGRAM_CHAT_ID=YOUR_CHAT_ID_HERE

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
PROJECT_NAME=ACS_Data_Collection
PLATFORM=ozon,wb,mskld,yandex,vk,getcourse
TZ=Europe/Moscow
EOF

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°
chmod 600 .env

================================================================================
Ð¨ÐÐ“ 8: Ð—ÐÐŸÐ£Ð¡Ðš Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ« (Ð˜Ð¡ÐŸÐžÐ›Ð¬Ð—Ð£Ð™Ð¢Ð• ÐžÐ Ð˜Ð“Ð˜ÐÐÐ›Ð¬ÐÐ«Ð• ÐžÐ‘Ð ÐÐ—Ð« MORINAD)
================================================================================

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker stop my_clickhouse upload_data 2>/dev/null || true
docker rm my_clickhouse upload_data 2>/dev/null || true

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ClickHouse (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð½Ð°Ñˆ ACS Ð¾Ð±Ñ€Ð°Ð· Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸)
docker run -d --name my_clickhouse --network chnet \
  -p 8123:8123 -p 9000:9000 \
  -v clickhouse_volume:/var/lib/clickhouse \
  -v /root/data-collection-service/client/config.xml:/etc/clickhouse-server/config.xml \
  -v /root/data-collection-service/client/users.xml:/etc/clickhouse-server/users.xml \
  --user clickhouse \
  abovyanmg/acs-clickhouse:latest \
  clickhouse-server --config-file=/etc/clickhouse-server/config.xml

# ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ 30 ÑÐµÐºÑƒÐ½Ð´ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ClickHouse
sleep 30

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ ClickHouse
echo "=== ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ClickHouse ==="
docker ps | grep my_clickhouse
curl -s http://localhost:8123/ping || echo "ClickHouse ÐµÑ‰Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ..."

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ upload_data (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð½Ð°Ñˆ ACS Ð¾Ð±Ñ€Ð°Ð·)
docker run -d --name upload_data --network chnet \
  -v "/root/data-collection-service/client/settings.xlsx:/app/settings.xlsx" \
  abovyanmg/acs-upload-data:latest

# ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ 10 ÑÐµÐºÑƒÐ½Ð´
sleep 10

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
echo "=== Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² ==="
docker ps

================================================================================
Ð¨ÐÐ“ 9: ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð ÐÐ‘ÐžÐ¢Ð« Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«
================================================================================

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ ClickHouse
echo "=== Ð›Ð¾Ð³Ð¸ ClickHouse ==="
docker logs my_clickhouse | tail -10

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ upload_data
echo "=== Ð›Ð¾Ð³Ð¸ upload_data ==="
docker logs upload_data | tail -10

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ClickHouse
echo "=== Ð¢ÐµÑÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ ==="
curl -s http://localhost:8123/ping

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ‚ÑŒ
echo "=== Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐµÑ‚Ð¸ ==="
docker network inspect chnet | grep -A5 -B5 IPAddress

================================================================================
Ð¨ÐÐ“ 10: ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ ÐÐ’Ð¢ÐžÐ—ÐÐŸÐ£Ð¡ÐšÐ
================================================================================

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ systemd ÑÐµÑ€Ð²Ð¸Ñ
cat > /etc/systemd/system/acs.service << 'EOF'
[Unit]
Description=ACS Data Collection Service
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/root/data-collection-service/client
ExecStart=/bin/bash -c "docker start my_clickhouse && sleep 30 && docker start upload_data"
ExecStop=/bin/bash -c "docker stop upload_data my_clickhouse"
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
EOF

# ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ systemd
systemctl daemon-reload

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
systemctl enable acs.service

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ
systemctl status acs.service

================================================================================
Ð¨ÐÐ“ 11: ÐœÐžÐÐ˜Ð¢ÐžÐ Ð˜ÐÐ“ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«
================================================================================

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
cat > /root/monitor_acs.sh << 'EOF'
#!/bin/bash

echo "ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ACS ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹..."

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ð°Ñ‚ÑƒÑ ClickHouse
if ! curl -s http://localhost:8123/ping | grep -q "Ok"; then
    echo "âŒ ClickHouse Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ - Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼..."
    docker restart my_clickhouse
    sleep 30
fi

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
if ! docker ps | grep -q "my_clickhouse.*Up"; then
    echo "âŒ ClickHouse Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½"
    exit 1
fi

if ! docker ps | grep -q "upload_data.*Up"; then
    echo "âŒ upload_data Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½"
    exit 1
fi

echo "âœ… ACS ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾"
EOF

# Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¼
chmod +x /root/monitor_acs.sh

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² cron Ð´Ð»Ñ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
echo "0 14 * * * /root/monitor_acs.sh" | crontab -

================================================================================
Ð¨ÐÐ“ 12: ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ˜
================================================================================

# Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
echo "=== Ð¤Ð˜ÐÐÐ›Ð¬ÐÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ« ==="

echo "Docker Ð²ÐµÑ€ÑÐ¸Ñ:"
docker --version

echo "Docker Compose Ð²ÐµÑ€ÑÐ¸Ñ:"
docker-compose --version

echo "Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²:"
docker ps

echo "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²:"
docker stats --no-stream

echo "ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ClickHouse:"
curl -s http://localhost:8123/ping

echo "Ð›Ð¾Ð³Ð¸ upload_data:"
docker logs upload_data | tail -5

echo "âœ… ACS ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð¸ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð°!"

================================================================================
Ð’ÐÐ–ÐÐ«Ð• Ð—ÐÐœÐ•Ð§ÐÐÐ˜Ð¯
================================================================================

1. Ð’Ð¡Ð•Ð“Ð”Ð Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹ Morinad:
   - morinad/my_clickhouse:latest
   - morinad/upload_data:latest

2. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ DNS Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ "my_clickhouse" - ÑÑ‚Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾,
   ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· IP Ð°Ð´Ñ€ÐµÑÐ° Ð² Docker ÑÐµÑ‚Ð¸.

3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ settings.xlsx Ñ Ð²Ð°ÑˆÐ¸Ð¼Ð¸ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ API ÐºÐ»ÑŽÑ‡Ð°Ð¼Ð¸ Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð°Ð¼Ð¸.

4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ Ð»Ð¾Ð³Ð¸ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð´Ð»Ñ Ð²Ñ‹ÑÐ²Ð»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼.

5. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÐµÑ€Ð²ÐµÑ€Ð°.

================================================================================
Ð£Ð¡Ð¢Ð ÐÐÐ•ÐÐ˜Ð• ÐÐ•ÐŸÐžÐ›ÐÐ”ÐžÐš
================================================================================

# Ð•ÑÐ»Ð¸ ClickHouse Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ:
docker logs my_clickhouse
docker restart my_clickhouse

# Ð•ÑÐ»Ð¸ upload_data Ð½Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ Ðº ClickHouse:
docker restart upload_data

# Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð²ÑÐµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹:
docker stop upload_data my_clickhouse
docker rm upload_data my_clickhouse
# Ð—Ð°Ñ‚ÐµÐ¼ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¨ÐÐ“ 8

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐµÑ‚Ð¸:
docker network inspect chnet

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° volumes:
docker volume ls

================================================================================
ÐšÐžÐÐ¢ÐÐšÐ¢Ð« ÐŸÐžÐ”Ð”Ð•Ð Ð–ÐšÐ˜
================================================================================

Email: abovyan.mg@gmail.com
GitHub: https://github.com/abovyanmg/data-collection-service

Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð±Ð°Ð·Ð¸Ñ: Morinad
ÐžÑÐ¾Ð±Ð°Ñ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚ÑŒ ÐÐ»ÐµÐºÑÐ°Ð½Ð´Ñ€Ñƒ ÐœÐ¾Ñ€Ð¸Ð½Ñƒ (@alexdirect)
